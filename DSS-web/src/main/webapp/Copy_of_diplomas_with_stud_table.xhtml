<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
	


		<ui:composition template="faces/templates/BasicTemplate.xhtml">
			<ui:define name="content">
			<div style="background-color: #F1F1F1;">
	
	
			<h:form id="form1">
			    <p:growl id="msgs" showDetail="false" />
			 
				<h:panelGrid id="years_grid" cellpadding="5" columns="2" style="margin-left:18%;">
				    <p:panel header="Виберіть захист" style="margin-bottom:5px;margin-top:5px;height:160px;width:600px">
				        <h:panelGrid columns="2" cellpadding="5">
				            <p:outputLabel for="year" value="Рік: " />
				            <p:selectOneMenu id="year" value="#{diplomasEditBean.year}" style="width:150px">
				                <p:ajax listener="#{diplomasEditBean.onYearChange}" update="quarter,:form2:groups_panal,:form4:students_panal,:form3:add_groups_panal,:form5:add_student_panal" />
				                <f:selectItem itemLabel="Веберіть рік" itemValue="" noSelectionOption="true" />
				                <f:selectItems value="#{diplomasEditBean.years}" />
				            </p:selectOneMenu>
				 
				            <p:outputLabel for="quarter" value="Чверть: " />
				            <p:selectOneMenu id="quarter" value="#{diplomasEditBean.quarter}" style="width:150px">
				           		<p:ajax listener="#{diplomasEditBean.onSeasonChange}" update=":form2:groups_panal,:form4:students_panal,:form3:add_groups_panal,:form5:add_student_panal"/>
				                <f:selectItem itemLabel="Виберіть чверть" itemValue="" noSelectionOption="true" />
				                <f:selectItems value="#{diplomasEditBean.quarters}" />
				            </p:selectOneMenu>
				        </h:panelGrid>
				 
				    </p:panel>
	
	
	
	 
				    <p:panel header="Додати рік" style="margin-bottom:5px;margin-top:5px;height:160px;width:600px">
				        
				        <p:outputLabel value="Рік: " for="acAdd" />
						<p:inputText id="acAdd" value="#{diplomasEditBean.newGraduationYear}" validatorMessage="Невірний формат року!" >
							<f:validateRegex pattern="[12][109][0-9][0-9]"/>
						</p:inputText>
				 
				        <p:separator />
				 
				        <p:commandButton value="Додати рік" update=":form1:msgs, quarter" actionListener="#{diplomasEditBean.addGraduation}" icon="ui-icon-check" />
				    </p:panel>
			    </h:panelGrid>

			</h:form>
				
			<h:panelGrid id="groups_grid" cellpadding="5" columns="2" style="margin-left:18%;">
				<h:form id="form2">
	
				    <p:panel id="groups_panal" header="Виберіть групу" style="margin-bottom:5px;margin-top:5px;height:160px;width:600px" visible="#{diplomasEditBean.displayGroups}">
				        
				        <p:outputLabel for="group" value="Група: " />
			            <p:selectOneMenu id="group" value="#{diplomasEditBean.groupName}" style="width:150px">
			            	<p:ajax listener="#{diplomasEditBean.onGroupChange}" update=":form4:students_panal,:form5:add_student_panal"/>
			                <f:selectItem itemLabel="Виберіть групу" itemValue="" noSelectionOption="true" />
			                <f:selectItems value="#{diplomasEditBean.groups}" />
			            </p:selectOneMenu>
			            
			            <p:separator />
				 
				        <p:commandButton value="Видалити групу" update=":form1:msgs, groups_panal,:form4:students_panal,:form5:add_student_panal" actionListener="#{diplomasEditBean.deleteGroup}" icon="ui-icon-check" />
				    </p:panel>
				</h:form>
					
				<h:form id="form3">
	
					<p:panel id="add_groups_panal" header="Додати групу" style="margin-bottom:5px;margin-top:5px;height:160px;width:600px" visible="#{diplomasEditBean.displayGroups}">
				        
				        <p:outputLabel value="Група: " for="addGroup" />
						<p:inputText id="addGroup" value="#{diplomasEditBean.newGroupName}" />
				 
				        <p:separator />
				 
				        <p:commandButton value="Додати групу" update=":form1:msgs, :form2:groups_panal" actionListener="#{diplomasEditBean.addGroup}" icon="ui-icon-check" />
				        
				    </p:panel>
				</h:form>
			</h:panelGrid>
				
			<h:form id="form4">

				<p:panel id="students_panal" header="Список студентів та даних про дипломи" style="margin:20px;width:1500px;margin-left:12%" visible="#{diplomasEditBean.displayStudents}">


					<p:contextMenu for="studs" widgetVar="cMenu">  
				       <p:menuitem value="Редагувати комарку" icon="ui-icon-search" onclick="PF('cellStuds').showCellEditor();return false;"/>
				       <p:menuitem value="Приховати меню" icon="ui-icon-close" onclick="PF('cMenu').hide()"/> 
				   </p:contextMenu> 

					<p:dataTable id="studs" var="student" value="#{diplomasEditBean.groupObj.students}"						
						editable="true" editMode="cell" widgetVar="cellStuds"

						rows="10"
                        paginator="true"
                        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                        rowsPerPageTemplate="5,10,15"

					 	resizableColumns="true" liveResize="true">
						
						
						<f:facet name="header">
				       		Список студентів та даних про дипломи
				  		</f:facet>

						<p:ajax event="cellEdit" listener="#{diplomasEditBean.onStudCellEdit}" update=":form1:msgs" />


						<p:column headerText="Прізвище">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{student.lName}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="#{student.lName}" style="width:96%" label="Year" />
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Імя">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{student.fName}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="#{student.fName}" style="width:96%" label="Year" />
								</f:facet>
							</p:cellEditor>
						</p:column>				
						
						<p:column headerText="По батькові">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{student.mName}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="#{student.mName}" style="width:96%" label="Year" />
								</f:facet>
							</p:cellEditor>
						</p:column>
						
						<p:column headerText="Номер телефону">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{student.telephoneNumber}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="#{student.telephoneNumber}" validatorMessage="Невірний формат телефону!" style="width:96%" label="Year" >
										<f:validateRegex pattern="[0-9+]?[0-9]*"/>
									</p:inputText>
								</f:facet>
							</p:cellEditor>
						</p:column>
						
						<p:column headerText="Електронна пошта">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{student.email}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText value="#{student.email}" style="width:96%" label="Year" />
								</f:facet>
							</p:cellEditor>
						</p:column>
						
						<p:column headerText="Диплом з відзнакою">
							<p:selectBooleanCheckbox value="#{student.hasHonorsDiplom}">
            					<p:ajax update=":form1:msgs,:form4:students_panal,:form5:add_student_panal" listener="#{diplomasEditBean.onStudentCheckboxEdit}" />
        					</p:selectBooleanCheckbox>
						</p:column>
						
						<p:column headerText="Рекомендувати в аспірантуру">
							<p:selectBooleanCheckbox value="#{student.isRecommendedToPostgraduate}">
            					<p:ajax update=":form1:msgs,:form4:students_panal,:form5:add_student_panal" listener="#{diplomasEditBean.onStudentCheckboxEdit}" />
        					</p:selectBooleanCheckbox>
						</p:column>
						
						<p:column>
		                    <p:commandButton icon="ui-icon-trash"
		                        title="Видалити запис"
		                        actionListener="#{diplomasEditBean.deleteStudent(student)}"
		                        ajax="false" />
	                	</p:column>


					</p:dataTable>

				</p:panel>

			</h:form>
	

			<h:form id="form5">
				<p:panel id="add_student_panal" header="Додати студента" style="margin-bottom:10px;margin-top:10px;width:800px;margin-left:12%"
						 visible="#{diplomasEditBean.displayStudents}">
			        <h:panelGrid id="add_student_panal_grid" cellpadding="5" columns="2" style="margin:10px">
			        
				        <p:outputLabel value="Прізвище: " for="addStudlName" />
						<p:inputText id="addStudlName" value="#{diplomasEditBean.newStudent.lName}" />
				 		
				 		<p:outputLabel value="Імя: " for="addStudfName" />
						<p:inputText id="addStudfName" value="#{diplomasEditBean.newStudent.fName}" />
						
						<p:outputLabel value="По батькові: " for="addStudmName" />
						<p:inputText id="addStudmName" value="#{diplomasEditBean.newStudent.mName}" />
						
						<p:outputLabel value="Номер телефону: " for="addTelephoneNumber" />
						<p:inputText id="addTelephoneNumber" value="#{diplomasEditBean.newStudent.telephoneNumber}" validatorMessage="Невірний формат телефону!" >
							<f:validateRegex pattern="[0-9+]?[0-9]*"/>
						</p:inputText>
	
						<p:outputLabel value="Електронна пошта: " for="addEmail" />
						<p:inputText id="addEmail" value="#{diplomasEditBean.newStudent.email}" />
				
						<p:outputLabel value="Диплом з відзнакою: " for="addHasHonorsDiplom" />
						<p:selectBooleanCheckbox  id="addHasHonorsDiplom" value="#{diplomasEditBean.newStudent.hasHonorsDiplom}"/>
						
						<p:outputLabel value="Рекомендувати в аспірантуру: " for="addIsRecommendedToPostgraduate" />
						<p:selectBooleanCheckbox  id="addIsRecommendedToPostgraduate" value="#{diplomasEditBean.newStudent.isRecommendedToPostgraduate}"/>

				 	</h:panelGrid>
				 	
			        <p:separator />
			        <p:commandButton value="Додати студента" update=":form1:msgs,:form4:students_panal,:form5:add_student_panal" actionListener="#{diplomasEditBean.addStudent}" icon="ui-icon-check" />
				        
			    </p:panel>
			</h:form>
	
	
		</div>
		</ui:define>
		</ui:composition>


</html>